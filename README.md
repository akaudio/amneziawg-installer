![Ubuntu 24.04](https://img.shields.io/badge/Ubuntu-24.04-orange)
![License](https://img.shields.io/badge/License-MIT-blue) <!-- Укажите вашу лицензию, если будете публиковать -->
![Status](https://img.shields.io/badge/Status-Active-success)

# Установка и управление AmneziaWG на Ubuntu 24.04

Скрипты для автоматической установки, настройки и управления VPN-сервером AmneziaWG на Ubuntu Server 24.04 LTS Minimal.

## Возможности

*   Автоматическая установка всех зависимостей, включая DKMS модуль AmneziaWG.
*   Автоматическое включение `deb-src` репозиториев (необходимо для сборки модуля).
*   Отключение IPv6 на уровне ядра.
*   Включение IPv4 форвардинга.
*   Настройка фаервола UFW (разрешены только SSH и порт VPN).
*   Автоматическая кастомизация клиентских конфигураций:
    *   DNS: 1.1.1.1 (Cloudflare)
    *   PersistentKeepalive: 33 секунды
    *   AllowedIPs: Список диапазонов Amnezia + принудительное туннелирование DNS Google/Cloudflare.
*   Генерация `.conf` файлов и QR-кодов для клиентов.
*   Возобновляемая установка (скрипт можно запускать повторно после перезагрузок).
*   Отдельный скрипт для удобного управления клиентами (добавление, удаление, просмотр, перегенерация файлов).
*   Подробное логирование действий.

## Быстрый старт

Подключитесь к вашему **чистому серверу Ubuntu 24.04 LTS Minimal** по SSH и выполните команду:

```bash
wget -O - https://raw.githubusercontent.com/bivlked/amneziawg-installer/main/install_amneziawg.sh | sudo bash
```
ВНИМАНИЕ: Эта команда скачает и немедленно запустит скрипт установки с правами root. Убедитесь, что вы доверяете источнику скрипта.
1. Первоначальная подготовка системы
Перед запуском скрипта установки убедитесь, что выполнены следующие условия:
Чистая ОС: У вас установлена свежая Ubuntu Server 24.04 LTS Minimal. Наличие другого ПО (веб-серверы, панели) может вызвать конфликты.
Доступ Root: У вас есть доступ к серверу с правами root (через sudo или прямой логин).
Интернет: Сервер имеет стабильное подключение к Интернету.
Ресурсы: Достаточно свободного места на диске (> 2-3 ГБ) и ОЗУ (> 512 МБ).
SSH Доступ: Вы можете подключаться к серверу по SSH. Скрипт автоматически разрешит стандартный порт SSH (22/tcp) в фаерволе UFW.
Нестандартный порт SSH: Если ваш SSH работает на порту отличном от 22, ОБЯЗАТЕЛЬНО добавьте правило для него в UFW до того, как скрипт включит фаервол (это происходит в Шаге 4). Пример команды: sudo ufw allow ВАШ_ПОРТ/tcp. Иначе вы потеряете доступ к серверу!
2. Установка AmneziaWG (скрипт install_amneziawg.sh)
Этот скрипт выполняет полную установку и настройку сервера.
Шаги:
Запустите скрипт ОДНОЙ КОМАНДОЙ (см. раздел "Быстрый старт"):
